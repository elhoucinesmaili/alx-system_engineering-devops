#!/bin/bash

# Function to fetch and display subdomain information
display_subdomain_info() {
    local domain=$1
    local subdomain=$2

    # Use dig to get the DNS record of the subdomain
    record=$(dig "$subdomain.$domain" +short)

    if [[ -n $record ]]; then
        echo "The subdomain $subdomain is a A record and points to $record"
    else
        echo "The subdomain $subdomain does not have an A record."
    fi
}

# Main script logic
main() {
    local domain=$1
    local specific_subdomain=$2

    if [[ -z $domain ]]; then
        echo "Error: Domain name is required."
        exit 1
    fi

    # If a specific subdomain is provided, display its information
    if [[ -n $specific_subdomain ]]; then
        display_subdomain_info "$domain" "$specific_subdomain"
    else
        # Default subdomains to audit
        subdomains=(www lb-01 web-01 web-02)
        for sub in "${subdomains[@]}"; do
            display_subdomain_info "$domain" "$sub"
        done
    fi
}

main "$1" "$2"

